specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  # LaunchpadManagerV2
  - kind: ethereum/contract
    name: LaunchpadManager
    network: bsc
    source:
      address: "0xcCfcfeB17609f0C5aE604bC71c4907B90B94a3e9" # Replace with deployed address
      abi: LaunchpadManager
      startBlock: 68856238 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Launch
        - Contribution
        - Token
      abis:
        - name: LaunchpadManager
          file: ./abis/LaunchpadManager.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        # Launch Creation Events
        - event: LaunchCreated(indexed address,indexed address,uint256,uint8,uint256,uint256,uint256,bool,bool)
          handler: handleLaunchCreated
        - event: InstantLaunchCreated(indexed address,indexed address,uint256,uint256,uint256,bool)
          handler: handleInstantLaunchCreated
        # Contribution Events
        - event: ContributionMade(indexed address,indexed address,uint256)
          handler: handleContributionMade
        - event: RaiseCompleted(indexed address,uint256)
          handler: handleRaiseCompleted
        - event: ContributorTokensClaimed(indexed address,indexed address,uint256)
          handler: handleContributorTokensClaimed
        - event: RefundClaimed(indexed address,indexed address,uint256)
          handler: handleRefundClaimed
        - event: RaiseFailed(indexed address,uint256)
          handler: handleRaiseFailed
        # Vesting Events
        - event: FounderTokensClaimed(indexed address,indexed address,uint256)
          handler: handleFounderTokensClaimed
        - event: RaisedFundsClaimed(indexed address,indexed address,uint256)
          handler: handleRaisedFundsClaimed
        # Community Control Events
        - event: VestedTokensBurnedByCommunityControl(indexed address,uint256)
          handler: handleVestedTokensBurned
        - event: CommunityControlTriggered(indexed address,uint256,uint256,uint256)
          handler: handleCommunityControlTriggered
        # Graduation Events
        - event: GraduatedToPancakeSwap(indexed address,uint256,uint256)
          handler: handleGraduatedToPancakeSwap
        - event: TransfersEnabled(indexed address,uint256)
          handler: handleTransfersEnabled
        # Trading Events
        - event: PostGraduationSell(indexed address,indexed address,uint256,uint256,uint256,uint256)
          handler: handlePostGraduationSell
        - event: PostGraduationBuy(indexed address,indexed address,uint256,uint256,uint256)
          handler: handlePostGraduationBuy
        # Platform Events
        - event: PlatformFeePaid(indexed address,uint256,string)
          handler: handlePlatformFeePaid
        - event: LPTokensHandled(indexed address,indexed address,uint256,bool)
          handler: handleLPTokensHandled
      file: ./src/launchpad-manager.ts

  # TokenFactoryV2
  - kind: ethereum/contract
    name: TokenFactory
    network: bsc
    source:
      address: "0x15E2ccAeb4D1eeA1A7b8d839FFA30D63519D1c50" # Replace with deployed address
      abi: TokenFactory
      startBlock: 68856238 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Token
      abis:
        - name: TokenFactory
          file: ./abis/TokenFactory.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: TokenCreated(indexed address,indexed address,string,string,uint256,bytes32)
          handler: handleTokenCreated
      file: ./src/token-factory.ts

  # BondingDEX
  - kind: ethereum/contract
    name: BondingDEX
    network: bsc
    source:
      address: "0xE96baB0D0661Fbfc710d79d58Cdb32bcD7bB8815" # Replace with deployed address
      abi: BondingDEX
      startBlock: 68856238 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Pool
        - Trade
        - Token
        - TokenHolder
      abis:
        - name: BondingDEX
          file: ./abis/BondingDEX.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: PoolCreated(indexed address,uint256,uint256,uint256,indexed address,uint256,uint256,uint256)
          handler: handlePoolCreated
        - event: TokensBought(indexed address,indexed address,uint256,uint256,uint256,uint256)
          handler: handleTokensBought
        - event: TokensSold(indexed address,indexed address,uint256,uint256,uint256,uint256)
          handler: handleTokensSold
        - event: PoolGraduated(indexed address,uint256,uint256,uint256,uint256)
          handler: handlePoolGraduated
        - event: CreatorFeesClaimed(indexed address,indexed address,uint256)
          handler: handleCreatorFeesClaimed
      file: ./src/bonding-dex.ts
