specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  # LaunchpadManagerV2
  - kind: ethereum/contract
    name: LaunchpadManager
    network: chapel
    source:
      address: "0x4c797EbaA64Cc7f1bD2a82A36bEE5Cf335D1830c" # Replace with deployed address
      abi: LaunchpadManager
      startBlock: 70508979 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Launch
        - Contribution
        - Token
      abis:
        - name: LaunchpadManager
          file: ./abis/LaunchpadManager.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: LaunchCreated(indexed address,indexed address,uint256,uint8,uint256,uint256,uint256,bool,bool)
          handler: handleLaunchCreated
        - event: InstantLaunchCreated(indexed address,indexed address,uint256,uint256,uint256,bool)
          handler: handleInstantLaunchCreated
        - event: ContributionMade(indexed address,indexed address,uint256)
          handler: handleContributionMade
        - event: RaiseCompleted(indexed address,uint256)
          handler: handleRaiseCompleted
        - event: ContributorTokensClaimed(indexed address,indexed address,uint256)
          handler: handleContributorTokensClaimed
        - event: RefundClaimed(indexed address,indexed address,uint256)
          handler: handleRefundClaimed
        - event: RaiseFailed(indexed address,uint256)
          handler: handleRaiseFailed
        - event: FounderTokensClaimed(indexed address,indexed address,uint256)
          handler: handleFounderTokensClaimed
        - event: RaisedFundsClaimed(indexed address,indexed address,uint256)
          handler: handleRaisedFundsClaimed
        - event: GraduatedToPancakeSwap(indexed address,uint256,uint256)
          handler: handleGraduatedToPancakeSwap
        - event: TransfersEnabled(indexed address,uint256)
          handler: handleTransfersEnabled
      file: ./src/launchpad-manager.ts

  # TokenFactoryV2
  - kind: ethereum/contract
    name: TokenFactory
    network: chapel
    source:
      address: "0xcb7526b9598240A737237C52f852705e6A449cD0" # Replace with deployed address
      abi: TokenFactory
      startBlock: 70508949 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Token
      abis:
        - name: TokenFactory
          file: ./abis/TokenFactory.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: TokenCreated(indexed address,indexed address,string,string,uint256,bytes32)
          handler: handleTokenCreated
      file: ./src/token-factory.ts

  # BondingDEX
  - kind: ethereum/contract
    name: BondingDEX
    network: chapel
    source:
      address: "0x14eB3B6C297ff6fefc25c0E0d289Bf8348e864f6" # Replace with deployed address
      abi: BondingDEX
      startBlock: 70508964 # Replace with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Pool
        - Trade
        - Token
        - TokenHolder
      abis:
        - name: BondingDEX
          file: ./abis/BondingDEX.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: PoolCreated(indexed address,uint256,uint256,uint256,indexed address,uint256,uint256,uint256)
          handler: handlePoolCreated
        - event: TokensBought(indexed address,indexed address,uint256,uint256,uint256,uint256)
          handler: handleTokensBought
        - event: TokensSold(indexed address,indexed address,uint256,uint256,uint256,uint256)
          handler: handleTokensSold
        - event: PoolGraduated(indexed address,uint256,uint256,uint256,uint256)
          handler: handlePoolGraduated
        - event: CreatorFeesClaimed(indexed address,indexed address,uint256)
          handler: handleCreatorFeesClaimed
      file: ./src/bonding-dex.ts
